<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="UserDashBoardStyle.css">
</head>
<body>

<div class="sidebar">
    <div class="sidebar-buttons">
        <button onclick="showNewRequest()">Ana Sayfa</button>
        <button onclick="openMyRequests()">Taleplerim</button>
        <button onclick="changePassword()">Şifre Değiştir</button>
        <button onclick="logout()">Çıkış Yap</button>
    </div>
</div>


<div class="content-area">
    <button id="sidebar-toggle" title="Menüyü Gizle/Göster">
        <div class="hamburger-icon"><div></div><div></div><div></div></div>
    </button>
    <div class="main-container" id="newRequestContainer">
        <h1>Yeni Talep Oluştur</h1>
        <input type="text" id="taskHeader" placeholder="Talep Başlığı">
        <textarea id="requestInput" placeholder="Talebinizi buraya yazın..."></textarea>
        <button class="submit-button" onclick="submitRequest()">Gönder</button>
    </div>
</div>
    <!-- Taleplerim Bölümü (başta gizli) -->
<div id="my-requests-content" style="display:none; overflow-x:auto;">
    <h1>Taleplerim</h1>
    <table border="1" cellpadding="5" cellspacing="0"
           style="width:100%; border-collapse: collapse; table-layout: fixed; word-wrap: break-word;">
        <thead>
        <tr>
            <th style="width:50px; text-align:center; position:relative;">
                <span id="idSortTrigger" style="cursor:pointer;">ID</span>
                <div id="idSortMenu" style="
        display:none;
        position:absolute;
        top:35px;
        left:0;
        transform: none;
        background:white;
        border:1px solid #ccc;
        border-radius:4px;
        box-shadow:0 2px 5px rgba(0,0,0,0.2);
        z-index:10;
        min-width:120px;
        text-align:left;">
                    <div class="sortOption" data-order="asc" style="padding:3px 6px; cursor:pointer; white-space:nowrap;">Küçükten Büyüğe</div>
                    <div class="sortOption" data-order="desc" style="padding:3px 6px; cursor:pointer; white-space:nowrap;">Büyükten Küçüğe</div>
                </div>
            </th>
            <th>Başlık</th>
            <th>İçerik</th>
            <th>Durum</th>
            <th>Tarih</th>
        </tr>
        </thead>
    </table>
</div>



<script src="UserDashBoardScript.js"></script>
<script>
    if (!localStorage.getItem("companyId")) {
      window.location.href = "http://localhost:8080/task/login";
    }
</script>

<script>
    // Toggle butonuna tıklandığında body elementine 'sidebar-collapsed' class'ını ekler/kaldırır.
    document.getElementById('sidebar-toggle').addEventListener('click', function() {
        document.body.classList.toggle('sidebar-collapsed');
    });
</script>
<script>
    const trigger = document.getElementById("idSortTrigger");
    const menu = document.getElementById("idSortMenu");

    trigger.addEventListener("click", function (e) {
      e.stopPropagation(); // dış tıklamaya karışmasın
      menu.style.display = (menu.style.display === "block") ? "none" : "block";
    });

    // Menü dışına tıklayınca kapat
    document.addEventListener("click", function (e) {
      if (!trigger.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = "none";
      }
    });
</script>
</body>
</html>